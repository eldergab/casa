<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Noite Familiar — Jogos</title>
  <style>
    :root{--bg:#0f172a;--card:#0b1220;--accent:#60a5fa;--muted:#94a3b8;--glass:rgba(255,255,255,0.03)}
    html,body{height:100%;margin:0;font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;color:#e6eef8;background:linear-gradient(180deg,#071028 0%,#081121 60%);}
    .wrap{max-width:980px;margin:28px auto;padding:20px}
    header{display:flex;gap:16px;align-items:center}
    h1{font-size:1.6rem;margin:0}
    p.lead{color:var(--muted);margin:6px 0 18px}

    .grid{display:grid;grid-template-columns:1fr 360px;gap:18px}
    .card{background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(0,0,0,0.03));padding:16px;border-radius:12px;box-shadow:0 6px 18px rgba(2,6,23,0.6);}
    .controls{display:flex;gap:8px;flex-wrap:wrap}
    label{font-size:0.85rem;color:var(--muted)}
    select,input[type=number]{padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:var(--glass);color:inherit}
    button{background:var(--accent);border:none;padding:10px 12px;border-radius:10px;color:#04233b;cursor:pointer;font-weight:600}
    button.secondary{background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--muted)}
    ul{padding-left:18px}

    /* Main game area */
    .game-area{min-height:420px;display:flex;flex-direction:column;gap:12px}
    .panel{background:linear-gradient(90deg, rgba(255,255,255,0.01), rgba(255,255,255,0.02));padding:14px;border-radius:10px}
    .question{font-size:1.1rem}
    .choices{display:flex;flex-direction:column;gap:8px;margin-top:8px}
    .choice{padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);cursor:pointer}

    .small{font-size:0.85rem;color:var(--muted)}
    footer.note{margin-top:12px;color:var(--muted);font-size:0.9rem}

    /* scoreboard */
    .scoreboard{display:flex;flex-direction:column;gap:10px}
    .player{display:flex;justify-content:space-between;align-items:center;padding:8px;border-radius:8px;background:rgba(255,255,255,0.01)}

    .timer{font-weight:700;color:var(--accent)}

    /* responsive */
    @media(max-width:880px){.grid{grid-template-columns:1fr;}.card{padding:12px}}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div>
        <h1>Noite Familiar — Jogos Interativos</h1>
        <p class="lead">6 jogos rápidos pensados para idades: 45, 40, 23, 20, 16, 11. Salve esta página e abra no navegador para jogar com a família.</p>
      </div>
    </header>

    <div class="grid">
      <div>
        <div class="card">
          <div class="controls">
            <div>
              <label>Nome do grupo (opcional)</label><br>
              <input id="groupName" placeholder="Família Silva" />
            </div>
            <div>
              <label>Modo de Jogo</label><br>
              <select id="mode">
                <option value="trivia">Trivia Familiar (quiz)</option>
                <option value="desafio">Desafios Rápidos</option>
                <option value="historia">Passa a História</option>
                <option value="caça">Caça ao Tesouro (em casa)</option>
                <option value="combobox">Misto (rotativo)</option>
              </select>
            </div>
            <div>
              <label>Tempo por rodada (seg)</label><br>
              <input id="timeLimit" type="number" min="10" max="180" value="30" />
            </div>
            <div style="align-self:end">
              <button id="startBtn">Começar</button>
            </div>
            <div style="align-self:end">
              <button class="secondary" id="resetBtn">Resetar Placar</button>
            </div>
          </div>

          <hr style="margin:12px 0;border:none;border-top:1px solid rgba(255,255,255,0.03)"/>

          <div class="game-area">
            <div class="panel" id="stage">
              <div class="small">Escolha um modo e pressione <strong>Começar</strong>.</div>
            </div>

            <div class="panel" id="actions" style="display:none">
              <div style="display:flex;justify-content:space-between;align-items:center">
                <div class="small">Rodada <span id="roundNo">0</span> — Tempo: <span class="timer" id="timeLeft">0</span>s</div>
                <div>
                  <button id="nextBtn" class="secondary">Próximo</button>
                  <button id="stopBtn" class="secondary">Parar</button>
                </div>
              </div>
              <div id="content"></div>
            </div>

            <footer class="note">Sugestão: misture modos para manter todo mundo envolvido. Para crianças, adapte as perguntas.</footer>
          </div>
        </div>

        <div style="height:12px"></div>

        <div class="card small">
          <strong>Como jogar (rápido):</strong>
          <ul>
            <li>Escolha o modo e pressione <em>Começar</em>.</li>
            <li>Cada rodada tem tempo definido. Um jogador por vez responde. Acertos somam pontos.</li>
            <li>Use <em>Próximo</em> para pular ou passar a vez.</li>
            <li>Placar automático na coluna direita.</li>
          </ul>
        </div>
      </div>

      <aside class="card">
        <h3>Placar</h3>
        <div class="scoreboard" id="scoreboard"></div>
        <hr/>
        <div>
          <label>Adicionar jogador</label><br>
          <input id="newPlayerName" placeholder="Nome" />
          <button id="addPlayerBtn">Adicionar</button>
        </div>

        <hr/>
        <div>
          <strong>Jogadores sugeridos (idades):</strong>
          <ul class="small">
            <li>Jogador A — 45</li>
            <li>Jogador B — 40</li>
            <li>Jogador C — 23</li>
            <li>Jogador D — 20</li>
            <li>Jogador E — 16</li>
            <li>Jogador F — 11</li>
          </ul>
        </div>

        <hr/>
        <div class="small">
          <strong>Dicas:</strong>
          <ul>
            <li>Para lembranças e histórias, escolha <em>Passa a História</em>.</li>
            <li>Para movimento e risadas, escolha <em>Desafios Rápidos</em>.</li>
            <li>Caça ao Tesouro funciona bem com celulares para foto das pistas.</li>
          </ul>
        </div>
      </aside>
    </div>
  </div>

  <script>
    // Dados padrão: jogadores (preenchidos conforme idades fornecidas)
    const defaultPlayers = [
      {name: 'Jogador A (45)', score:0},
      {name: 'Jogador B (40)', score:0},
      {name: 'Jogador C (23)', score:0},
      {name: 'Jogador D (20)', score:0},
      {name: 'Jogador E (16)', score:0},
      {name: 'Jogador F (11)', score:0}
    ];

    // Questions bank (family-friendly). Each item: text, choices (optional), answerIndex (optional), difficulty tag
    const triviaBank = [
      {q:'Qual é o primeiro livro da Bíblia?', choices:['Gênesis','Êxodo','Mateus','Salmos'], a:0},
      {q:'Que instrumento tem 6 cordas (na afinação mais comum)?', choices:['Violão','Cavaquinho','Piano','Flauta'], a:0},
      {q:'Qual é a capital do Brasil?', choices:['Rio de Janeiro','São Paulo','Brasília','Salvador'], a:2},
      {q:'Que cor resulta da mistura de azul e amarelo?', choices:['Verde','Roxo','Marrom','Laranja'], a:0},
      {q:'Quantos meses têm 30 dias?', choices:['7','4','11','5'], a:1},
      {q:'Quem foi o profeta que traduziu os registros? (Joseph Smith relacionado)', choices:['José','Joseph Smith','Moisés','Nicolau'], a:1},
      {q:'Qual destes é um animal doméstico comum?', choices:['Girafa','Cachorro','Leão','Tucano'], a:1},
      {q:'Em uma família, o que é mais valioso que ouro?', choices:['Roupas','Relacionamentos','Carro','Casa'], a:1}
    ];

    // Desafios rápidos (ações físicas ou criativas)
    const quickChallenges = [
      'Imite um animal por 30 segundos — os outros adivinham.',
      'Faça 10 polichinelos (ou 5 se alguém tiver problema de saúde).',
      'Conte uma piada curta; se ninguém rir, você perde a vez.',
      'Desenhe um objeto em 20 segundos com os olhos vendados.',
      'Cante um trecho de uma música que todo mundo conheça.'
    ];

    // Passa a história — prompts para continuar a narrativa
    const storyPrompts = [
      'Era uma vez um lugar onde todos se sentiam em paz. De repente...',
      'Na melhor lembrança da família, um incidente engraçado aconteceu quando...',
      'Se você pudesse agradecer a alguém desta família, por quê e o que diria?',
      'Se tivéssemos um superpoder familiar, qual seria e como o usaríamos?'
    ];

    // Caça ao tesouro — ideias de pistas dentro de casa
    const huntClues = [
      'Tire uma foto de algo vermelho na sala.',
      'Traga um objeto que começas com a letra "M".',
      'Encontre uma foto antiga de família e conte em 30s a história dela.',
      'Ache algo que foi comprado há mais de 5 anos.'
    ];

    // state
    let players = JSON.parse(JSON.stringify(defaultPlayers));
    let currentMode = 'trivia';
    let round = 0;
    let currentIndex = 0; // index of current player
    let timer = null;
    let timeLeft = 0;

    // DOM refs
    const scoreboardEl = document.getElementById('scoreboard');
    const startBtn = document.getElementById('startBtn');
    const resetBtn = document.getElementById('resetBtn');
    const modeSel = document.getElementById('mode');
    const stage = document.getElementById('stage');
    const actions = document.getElementById('actions');
    const content = document.getElementById('content');
    const roundNo = document.getElementById('roundNo');
    const timeLeftEl = document.getElementById('timeLeft');
    const nextBtn = document.getElementById('nextBtn');
    const stopBtn = document.getElementById('stopBtn');
    const timeLimitInput = document.getElementById('timeLimit');
    const addPlayerBtn = document.getElementById('addPlayerBtn');
    const newPlayerName = document.getElementById('newPlayerName');
    const resetScoreBtn = document.getElementById('resetBtn');

    function renderScoreboard(){
      scoreboardEl.innerHTML = '';
      players.forEach((p, idx)=>{
        const div = document.createElement('div');
        div.className = 'player';
        div.innerHTML = `<div>${idx+1}. ${p.name}</div><div><button class='secondary' data-idx='${idx}' onclick='decrScore(event)'>-</button> <strong>${p.score}</strong> <button data-idx='${idx}' onclick='incrScore(event)'>+</button></div>`;
        scoreboardEl.appendChild(div);
      });
    }

    window.incrScore = function(e){
      const idx = +e.currentTarget.dataset.idx;
      players[idx].score += 1;
      renderScoreboard();
    }
    window.decrScore = function(e){
      const idx = +e.currentTarget.dataset.idx;
      players[idx].score = Math.max(0, players[idx].score-1);
      renderScoreboard();
    }

    addPlayerBtn.addEventListener('click', ()=>{
      const name = newPlayerName.value.trim();
      if(!name) return alert('Digite um nome.');
      players.push({name, score:0});
      newPlayerName.value='';
      renderScoreboard();
    });

    resetScoreBtn.addEventListener('click', ()=>{
      players.forEach(p=>p.score=0);
      renderScoreboard();
    });

    modeSel.addEventListener('change', ()=> currentMode = modeSel.value);

    startBtn.addEventListener('click', ()=>{
      currentMode = modeSel.value;
      round = 0; currentIndex = 0;
      actions.style.display = 'block';
      stage.style.display = 'none';
      nextRound();
    });

    stopBtn.addEventListener('click', stopGame);
    nextBtn.addEventListener('click', nextRound);

    function stopGame(){
      clearInterval(timer); timer=null;
      actions.style.display='none'; stage.style.display='block';
      content.innerHTML='';
      stage.innerHTML = '<div class="small">Jogo parado. Pressione Começar para reiniciar.</div>';
    }

    function nextRound(){
      clearInterval(timer);
      round += 1;
      roundNo.textContent = round;
      timeLeft = Math.max(10, parseInt(timeLimitInput.value)||30);
      timeLeftEl.textContent = timeLeft;
      const player = players[currentIndex % players.length];

      // decide content based on mode
      if(currentMode === 'trivia') renderTrivia(player);
      else if(currentMode === 'desafio') renderDesafio(player);
      else if(currentMode === 'historia') renderHistoria(player);
      else if(currentMode === 'caça') renderCaça(player);
      else renderCombo(player);

      // start timer
      timer = setInterval(()=>{
        timeLeft -=1; timeLeftEl.textContent = timeLeft;
        if(timeLeft<=0){ clearInterval(timer); timer=null; alert('Tempo esgotado! Passa a vez.'); currentIndex +=1; }
      },1000)
    }

    function renderTrivia(player){
      const q = triviaBank[Math.floor(Math.random()*triviaBank.length)];
      content.innerHTML = `<div class='question'>${player.name}, pergunta:</div><div class='question' style='font-weight:700;margin-top:6px'>${q.q}</div>`;
      const choices = document.createElement('div'); choices.className='choices';
      q.choices.forEach((c,i)=>{
        const b = document.createElement('div'); b.className='choice'; b.textContent = c; b.onclick = ()=>{
          clearInterval(timer); timer=null;
          if(i===q.a){ alert('Resposta correta! +1 ponto para '+player.name); player.score+=1; }
          else{ alert('Errado — resposta: '+q.choices[q.a]); }
          renderScoreboard(); currentIndex+=1;
        };
        choices.appendChild(b);
      });
      content.appendChild(choices);
    }

    function renderDesafio(player){
      const d = quickChallenges[Math.floor(Math.random()*quickChallenges.length)];
      content.innerHTML = `<div class='question'>Desafio para <strong>${player.name}</strong>:</div><div style='margin-top:8px'>${d}</div><div style='margin-top:10px'><button onclick='completeChallenge(${currentIndex})'>Concluir (pontuar)</button> <button class='secondary' onclick='skipTurn()'>Pular</button></div>`;
    }

    function renderHistoria(player){
      const p = storyPrompts[Math.floor(Math.random()*storyPrompts.length)];
      content.innerHTML = `<div class='question'>${player.name}, continue a história:</div><div style='margin-top:8px'>"${p}"</div><div style='margin-top:10px'><small class='small'>Cada jogador tem 60s para contribuir. Quem emocionar ou fizer a melhor continuação ganha 2 pontos (decidido pelo grupo).</small><div style='margin-top:8px'><button onclick='awardPoints(${currentIndex},2)'>Conceder 2 pontos</button> <button class='secondary' onclick='skipTurn()'>Pular</button></div></div>`;
    }

    function renderCaça(player){
      const c = huntClues[Math.floor(Math.random()*huntClues.length)];
      content.innerHTML = `<div class='question'>Caça ao Tesouro — <strong>${player.name}</strong></div><div style='margin-top:8px'>${c}</div><div style='margin-top:10px'><button onclick='photoDone(${currentIndex})'>Concluí (foto/objeto)</button> <button class='secondary' onclick='skipTurn()'>Pular</button></div>`;
    }

    function renderCombo(player){
      const modes = ['trivia','desafio','historia','caça'];
      const pick = modes[Math.floor(Math.random()*modes.length)];
      currentMode = pick; modeSel.value = pick; // show picked
      if(pick==='trivia') renderTrivia(player);
      if(pick==='desafio') renderDesafio(player);
      if(pick==='historia') renderHistoria(player);
      if(pick==='caça') renderCaça(player);
    }

    // helpers called from content
    window.completeChallenge = function(idx){
      players[idx].score +=1; renderScoreboard(); currentIndex+=1; clearInterval(timer); timer=null; }
    window.photoDone = function(idx){ players[idx].score +=1; renderScoreboard(); currentIndex+=1; clearInterval(timer); timer=null; }
    window.skipTurn = function(){ currentIndex+=1; clearInterval(timer); timer=null; }
    window.awardPoints = function(idx,pts){ players[idx].score += pts; renderScoreboard(); currentIndex+=1; clearInterval(timer); timer=null; }

    // init
    renderScoreboard();

    // keyboard shortcuts (space = next)
    document.addEventListener('keydown', e=>{ if(e.code==='Space') nextRound(); if(e.key==='s') stopGame(); });

    // small UX: prevent accidental form submit
    document.querySelectorAll('input,select').forEach(i=>i.addEventListener('keydown', e=>{ if(e.key==='Enter') e.preventDefault(); }));

    // Save / load basic state to localStorage
    function saveState(){ localStorage.setItem('fam_game_players', JSON.stringify(players)); }
    function loadState(){ const v=localStorage.getItem('fam_game_players'); if(v) players = JSON.parse(v); }
    window.addEventListener('beforeunload', saveState);
    loadState(); renderScoreboard();
  </script>
</body>
</html>
